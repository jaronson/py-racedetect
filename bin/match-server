#!/usr/bin/env python
import cherrypy
from racedetect import server
from ws4py.server.cherrypyserver import WebSocketPlugin, WebSocketTool
from ws4py.websocket import EchoWebSocket

cherrypy.config.update({
    'server.socket_port': 9000
    })

WebSocketPlugin(cherrypy.engine).subscribe()
cherrypy.tools.websocket = WebSocketTool()

conf = {
        '/ws': {
            'tools.websocket.on': True,
            'tools.websocket.handler_cls': EchoWebSocket
        }
    }

cherrypy.quickstart(server.MatchServer(), '/', config=conf)
